<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Futuristic Dashboard</title>
<style>
  /* Reset and base styles */
  * { box-sizing: border-box; margin: 0; padding: 0; }
  body, html { height: 100%; font-family: Arial, Helvetica, sans-serif; }
  body { overflow-x: hidden; color: #fff; }
  button { cursor: pointer; }

  /* Background starfield */
  body::before {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(ellipse at bottom, #1b2735 0%, #090a0f 100%);
    z-index: -3;
  }
  body::after {
    content: "";
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: transparent url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0nMTAnIGhlaWdodD0nMTAnIHZpZXdCb3g9JzAgMCAxMCAxMCcgeG1sbnM9J2h0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnJz48Y2lyY2xlIGN4PScxJyBjeT0nMScgcj0nMScgZmlsbD0nI2ZmZicgZmlsbC1vcGFjaXR5PScwLjEnLz48Y2lyY2xlIGN4PSc2JyBjeT0nNCcgcj0nMC41JyBmaWxsPScjZmZmJyBmaWxsLW9wYWNpdHk9JzAuMicvPjwv'+
    'c3ZnPg==') repeat;
    animation: starAnim 50s linear infinite;
    z-index: -2;
    opacity: 0.5;
  }
  @keyframes starAnim { from { background-position: 0 0; } to { background-position: 1000px 1000px; } }

  /* Login screen */
  #loginScreen { display:flex; flex-direction:column; align-items:center; justify-content:center; height:100%; }
  #loginBox { background:rgba(255,255,255,0.1); backdrop-filter: blur(10px); padding:40px; border-radius:10px; border:1px solid rgba(255,255,255,0.2); }
  #loginBox input { padding:10px; margin-bottom:10px; width:200px; }
  #loginBox button { padding:10px 20px; }

  /* App layout */
  #app { display:none; padding-top:60px; }
  nav { position:fixed; top:0; left:0; right:0; height:60px; backdrop-filter:blur(10px); background:rgba(0,0,0,0.4); display:flex; align-items:center; justify-content:space-between; padding:0 20px; border-bottom:1px solid rgba(255,255,255,0.2); }
  #netWorthBtn { padding:10px 20px; border:none; border-radius:5px; background:#0ff; color:#000; font-weight:bold; box-shadow:0 0 10px #0ff; animation:pulse 2s infinite; }
  @keyframes pulse { 0%,100% { box-shadow:0 0 10px #0ff; } 50% { box-shadow:0 0 20px #0ff; } }

  /* Sections */
  #sections { max-width:900px; margin:0 auto; padding:20px; }
  .card { margin-bottom:20px; padding:20px; border-radius:15px; background:rgba(255,255,255,0.1); border:1px solid rgba(255,255,255,0.3); backdrop-filter:blur(10px); display:flex; align-items:center; font-size:1.2em; }
  .card:hover { border-color:#0ff; box-shadow:0 0 10px #0ff; }

  /* Net Worth Tracker panel */
  #trackerPanel { position:fixed; top:0; right:-100%; width:100%; max-width:600px; height:100%; background:rgba(0,0,0,0.9); backdrop-filter:blur(10px); transition:right 0.5s; padding:20px; overflow-y:auto; }
  #trackerPanel.open { right:0; }
  #trackerPanel table { width:100%; border-collapse:collapse; margin-bottom:20px; }
  #trackerPanel th, #trackerPanel td { padding:8px; text-align:left; border-bottom:1px solid rgba(255,255,255,0.2); }
  #trackerPanel input, #trackerPanel select { padding:5px; margin-right:5px; }

  /* Responsive */
  @media(max-width:600px){
    #loginBox { width:90%; }
    .card { flex-direction:column; align-items:flex-start; }
  }
</style>
</head>
<body>
<div id="loginScreen">
  <div id="loginBox">
    <h2 style="margin-bottom:10px;">Login</h2>
    <input id="username" placeholder="Username"><br>
    <input id="password" type="password" placeholder="Password (any)"><br>
    <button onclick="login()">Login</button>
    <div id="loginError" style="color:#f88; margin-top:10px; display:none;">Invalid credentials</div>
  </div>
</div>

<div id="app">
  <nav>
    <div>Logged in as <b id="userLabel"></b></div>
    <button id="netWorthBtn" onclick="toggleTracker()">Net Worth Tracker</button>
  </nav>
  <div id="sections"></div>
</div>

<div id="trackerPanel">
  <h2>Net Worth Tracker</h2>
  <table id="marketTable">
    <thead>
      <tr><th>Coin</th><th>Symbol</th><th>Price (USD)</th><th>24h %</th><th>Market Cap</th></tr>
    </thead>
    <tbody></tbody>
  </table>

  <h3>Add Holding</h3>
  <select id="coinSelect"></select>
  <input type="number" id="coinAmount" placeholder="Amount" min="0" step="any">
  <button onclick="addHolding()">Add</button>

  <h3>Your Holdings</h3>
  <table id="holdingsTable">
    <thead>
      <tr><th>Coin</th><th>Amount</th><th>Value (USD)</th><th></th></tr>
    </thead>
    <tbody></tbody>
  </table>
  <div>Total Portfolio Value: $<span id="totalValue">0</span></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
<script>
const VALID_USER = 'admin8923';
let marketData = [];

function init() {
  const logged = localStorage.getItem('loggedUser');
  if (logged === VALID_USER) {
    document.getElementById('loginScreen').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    document.getElementById('userLabel').textContent = logged;
    setupSections();
    fetchMarket();
    loadHoldings();
  }
}

function login() {
  const u = document.getElementById('username').value.trim();
  if (u === VALID_USER) {
    localStorage.setItem('loggedUser', u);
    init();
  } else {
    document.getElementById('loginError').style.display = 'block';
  }
}

function setupSections(){
  const defaultOrder = ['maintenance','strategy','savings','protection'];
  const order = JSON.parse(localStorage.getItem('sectionsOrder')||'[]');
  const finalOrder = order.length?order:defaultOrder;
  const container=document.getElementById('sections');
  container.innerHTML='';
  finalOrder.forEach(id=>{
    const card=document.createElement('div');
    card.className='card';
    card.id=id;
    let label='';
    switch(id){
      case 'maintenance':label='\uD83D\uDD27 Maintenance & Management';break;
      case 'strategy':label='\uD83D\uDCE6 Strategic Additions';break;
      case 'savings':label='\uD83D\uDCBE Operational Savings';break;
      case 'protection':label='\uD83D\uDEE1\uFE0F Brand Protection';break;
    }
    card.textContent=label;
    container.appendChild(card);
  });
  new Sortable(container,{animation:150,onEnd:e=>{
    const newOrder=Array.from(container.children).map(c=>c.id);
    localStorage.setItem('sectionsOrder',JSON.stringify(newOrder));
  }});
}

function toggleTracker(){
  document.getElementById('trackerPanel').classList.toggle('open');
}

async function fetchMarket(){
  try{
    const res=await fetch('https://api.coingecko.com/api/v3/coins/markets?vs_currency=usd&order=market_cap_desc&per_page=100&page=1&sparkline=false');
    marketData=await res.json();
    const tbody=document.querySelector('#marketTable tbody');
    const select=document.getElementById('coinSelect');
    tbody.innerHTML='';
    select.innerHTML='';
    marketData.forEach(c=>{
      tbody.insertAdjacentHTML('beforeend',`<tr><td>${c.name}</td><td>${c.symbol.toUpperCase()}</td><td>${c.current_price}</td><td>${c.price_change_percentage_24h?.toFixed(2)}%</td><td>${c.market_cap}</td></tr>`);
      const opt=document.createElement('option');
      opt.value=c.id; opt.textContent=c.name; select.appendChild(opt);
    });
  }catch(e){console.error(e);}
}

function addHolding(){
  const coinId=document.getElementById('coinSelect').value;
  const amount=parseFloat(document.getElementById('coinAmount').value);
  if(!coinId || isNaN(amount))return;
  const holdings=getHoldings();
  const existing=holdings.find(h=>h.id===coinId);
  if(existing){existing.amount+=amount;}else{holdings.push({id:coinId,amount});}
  localStorage.setItem('holdings',JSON.stringify(holdings));
  document.getElementById('coinAmount').value='';
  renderHoldings();
}

function getHoldings(){
  return JSON.parse(localStorage.getItem('holdings')||'[]');
}

function loadHoldings(){
  renderHoldings();
}

function renderHoldings(){
  const holdings=getHoldings();
  const tbody=document.querySelector('#holdingsTable tbody');
  tbody.innerHTML='';
  let total=0;
  holdings.forEach((h,i)=>{
    const coin=marketData.find(c=>c.id===h.id);
    if(!coin)return;
    const value=h.amount*coin.current_price;
    total+=value;
    tbody.insertAdjacentHTML('beforeend',`<tr><td>${coin.name}</td><td>${h.amount}</td><td>${value.toFixed(2)}</td><td><button onclick="removeHolding(${i})">âœ–</button></td></tr>`);
  });
  document.getElementById('totalValue').textContent=total.toFixed(2);
}

function removeHolding(index){
  const holdings=getHoldings();
  holdings.splice(index,1);
  localStorage.setItem('holdings',JSON.stringify(holdings));
  renderHoldings();
}

window.onload=init;
</script>
</body>
</html>
